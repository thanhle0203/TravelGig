$(document).ready(function(){
    // Attach a click event to the Add Trainer button
    $("#add-trainer-button").click(function(){
        // Clear the form fields
        $("#trainerId").val("");
        $("#trainerName").val("");
        $("#trainerAge").val("");

        // Show the Add Trainer modal
        $("#add-trainer-modal").modal("show");
    });

    // Attach a submit event to the Add Trainer form
    $("#add-trainer-form").submit(function(event){
        // Stop form from submitting normally
        event.preventDefault();

        // Get form data
        var trainerId = $("#trainerId").val();
        var trainerName = $("#trainerName").val();
        var trainerAge = $("#trainerAge").val();

        // Create a new Trainer object
        var newTrainer = {trainerId: trainerId, trainerName: trainerName, trainerAge: trainerAge};

        // Send the new Trainer object to the server
        $.ajax({
            type: "POST",
            url: "http://localhost:8383/saveTrainer",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(newTrainer),
            success: function(response){
                // Hide the Add Trainer modal
                $("#add-trainer-modal").modal("hide");

                // Show success message
                alert("Trainer added successfully!");

                // Refresh the trainers list
                refreshTrainersList();
            },
            error: function(error){
                console.log(error);
                alert("Error adding trainer.");
            }
        });
    });

    // Refresh the trainers list on page load
    refreshTrainersList();
});

function refreshTrainersList(){
    // Send a request to the server for the list of trainers
    $.get("http://localhost:8383/getAllTrainer", function(response){
        // Clear the table body
        $("#trainersTableBody").empty();

        // Populate the table with the list of trainers
        for(var i = 0; i < response.length; i++){
            var trainer = response[i];
            $("#trainersTableBody").append("<tr><td>" + trainer.trainerId + "</td><td>" + trainer.trainerName + "</td><td>" + trainer.trainerAge + "</td></tr>");
        }
    });
}
