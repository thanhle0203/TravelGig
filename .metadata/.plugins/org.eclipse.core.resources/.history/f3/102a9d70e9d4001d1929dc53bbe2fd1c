$(document).ready(function() {
	// Add Trainer Form Submit Event
	$("#add-trainer-form").submit(function(e) {
		// Prevent form submission
		e.preventDefault();
		
		// Get form data
		var trainerId = $("#trainerId").val();
		var trainerName = $("#trainerName").val();
		var trainerAge = $("#trainerAge").val();
		
		// Create new Trainer object
		var trainer = {
			id: trainerId,
			name: trainerName,
			age: trainerAge
		};
		
		// POST request to add new Trainer
		$.ajax({
			url: "/api/trainer",
			method: "POST",
			data: JSON.stringify(trainer),
			contentType: "application/json",
			success: function(data) {
				// Clear form inputs
				$("#trainerId").val("");
				$("#trainerName").val("");
				$("#trainerAge").val("");
				
				// Alert user of success
				alert("Trainer added successfully!");
			},
			error: function(error) {
				// Alert user of error
				alert("Error adding trainer. Please try again.");
			}
		});
	});
	
	// View Trainers Button Click Event
	$("#trainersModal").on("shown.bs.modal", function() {
		// GET request to retrieve all Trainers
		$.ajax({
			url: "/api/trainer",
			method: "GET",
			success: function(data) {
				// Clear table body
				$("#trainersTableBody").empty();
				
				// Add each Trainer to table
				data.forEach(function(trainer) {
					$("#trainersTableBody").append(
						"<tr>" +
						"<td>" + trainer.id + "</td>" +
						"<td>" + trainer.name + "</td>" +
						"<td>" + trainer.age + "</td>" +
						"</tr>"
					);
				});
			},
			error: function(error) {
				// Alert user of error
				alert("Error retrieving trainers. Please try again.");
			}
		});
	});
});
